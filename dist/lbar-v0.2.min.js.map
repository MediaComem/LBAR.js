{"version":3,"sources":["lbar-v0.2.js"],"names":["AFRAME","registerSystem","schema","minAccuracy","type","default","minDistance","cam3DoF","init","success","this","checkDependencies","currentPosition","latitude","longitude","originPosition","_onDeviceGPS","bind","_onDeviceGPSError","_watchPosition","navigator","geolocation","watchPosition","enableHighAccuracy","timeout","video","data","el","sceneEl","is","_createVideo","_onEnterVrAr","_onExitVrAr","window","addEventListener","remove","_removeVideo","removeEventListener","clearWatch","update","oldData","Object","entries","length","let","console","error","_pauseVideo","_unPauseVideo","videoContainer","document","createElement","style","width","height","position","top","left","zIndex","setAttribute","mediaDevices","getUserMedia","audio","facingMode","then","stream","srcObject","appendChild","body","removeChild","pause","tracks","getTracks","forEach","track","stop","play","warn","err","code","message","pos","coords","accuracy","distMoved","_haversineDist","dispatchEvent","CustomEvent","detail","src","dest","dlongitude","THREE","Math","degToRad","dlatitude","a","sin","cos","angle","atan2","sqrt","registerComponent","_onPositionSet","_onPositionUpdate","system","posEvt","haversineDist","gpsPos","x","y","getAttribute","z","alwaysInSynch","heading","_onDeviceOrientation","object3D","camPos","camera","event","alpha","absolute","newHeading","_computeCompassHeading","beta","gamma","_updateRotation","rotation","alphaRad","PI","betaRad","gammaRad","cA","sA","sB","cG","sG","rA","rB","compassHeading","atan","dependencies","enabled","magicWindowTrackingEnabled","pointerLockEnabled","reverseMouseDrag","reverseTouchDrag","touchEnabled","mouseEnabled","deltaYaw","previousHMDPosition","Vector3","hmdQuaternion","Quaternion","magicWindowAbsoluteEuler","Euler","magicWindowDeltaEuler","magicWindowObject","Object3D","deltaRotation","savedPose","pointerLocked","setupMouseControls","bindMethods","previousMouseEvent","setupMagicWindowControls","onEnterVR","magicWindowControls","utils","device","isMobile","isMobileDeviceRequestingDesktopSite","DeviceOrientationControls","DeviceOrientationEvent","requestPermission","components","permissionGranted","updateGrabCursor","set","removeEventListeners","addEventListeners","exitPointerLock","tick","t","updateOrientation","onMouseDown","onMouseMove","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","onExitVR","onPointerLockChange","onPointerLockError","mouseDown","pitchObject","yawObject","add","canvasEl","canvas","checkHeadsetConnected","updateMagicWindowOrientation","setFromQuaternion","quaternion","previousMagicWindowYaw","evt","direction","movementX","movementY","mozMovementX","mozMovementY","screenX","screenY","max","min","button","showGrabbingCursor","requestPointerLock","mozRequestPointerLock","cursor","hideGrabbingCursor","touches","touchStart","pageX","pageY","touchStarted","deltaY","clientWidth","saveCameraPose","hasWebXR","matrixAutoUpdate","updateMatrix","restoreCameraPose","pointerLockElement","mozPointerLockElement","enableGrabCursor","classList","disableGrabCursor","copy","hasSavedPose"],"mappings":"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"}